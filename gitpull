#!/bin/bash
set -o errexit
set -o nounset

# Git clone/pull van alle repo's in repo.list.

git config --global pull.ff only
git config --global credential.helper store
while read -r repo; do
    printf "$(tput bold)%s$(tput sgr0)\n" "$repo"
    if ! git    clone                                       \
                "https://github.com/karelzimmer/$repo.git"  \
                "$HOME/$repo"                               ; then
        cd "$HOME/$repo" || exit 1
        if ! git pull; then
            git clean -fd
            git pull
        fi
    fi
done < "$HOME"/bin/repo.list
